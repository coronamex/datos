

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title><link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <script src="../Content/js/jquery-3.2.1.js"></script>
    <script src="../Content/js/json2.js"></script>
    <script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
    <script type="text/javascript" src="https://www.amcharts.com/lib/3/serial.js"></script>
    <script src="https://www.amcharts.com/lib/4/core.js"></script>
    <script src="https://www.amcharts.com/lib/4/charts.js"></script>
    <script src="https://www.amcharts.com/lib/4/maps.js"></script>
    <script src="https://www.amcharts.com/lib/4/themes/dataviz.js"></script>
    <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
    
 

    <link href="../Content/css/ChartyLoad.css" rel="stylesheet" />
    <style type="text/css">
     .auto-style40 {
        width: 1080px;
        border: 1px solid black;
    }
    </style>

    <script type="text/javascript">
        $(document).ready(function () {
            cargarDatos();
        });

        function cargarDatos() {am4core.useTheme(am4themes_animated);
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "Mapa45.aspx/Grafica22",
                data: "{}",
                datatype: "json",
                success: llenarChart21,
                error: function ajaxError(result) {
                    alert(result.status + ' : ' + result.statusText);
                }
            });
        }

        function crearlabel(chart, x, y, text, color, tam) {
            var label = chart.createChild(am4core.Label);
            label.text=text;
            label.background.fill = am4core.color(color);
            label.background.fillOpacity = 0.8;
            label.fontSize=tam;
            label.align="middle";
            label.isMesasured=false;
            label.x=x;
            label.y=y;
        }

function crearlabelnumero(chart, x, y, text, color, tam) {
            var label = chart.createChild(am4core.Label);
            label.text = text;
            label.background.fill = am4core.color(color);
            label.background.fillOpacity = 0.8;
            label.fontSize=tam;
            label.align="middle";
            label.isMesasured=false;
            label.x=x;
            label.y=y;
        }


 function crearlabelCOLOR(chart, x, y, text, color, tam) {
            var label = chart.createChild(am4core.Label);
            label.text=text;
            label.background.fill = am4core.color(color);
            label.background.fillOpacity = 0.8;
            label.fontSize=tam;
            label.align="middle";
            label.isMesasured=false;
            label.x=x;
            label.y=y;
        }


        function QuitaCarga(elemento) {
            var Carga = document.getElementById(elemento); // La "imagen" que aparece cuando está cargando la gráfica
            Carga.parentElement.removeChild(Carga);
        }

        function CreaExport(chart, Nombre) {
            chart.exporting.menu = new am4core.ExportMenu();
            chart.exporting.menu.items = [{
                "label": "",
                "menu": [
                    {
                        "label": "Imagen",
                        "menu": [
                            { "type": "png", "label": "PNG" },
                            { "type": "jpg", "label": "JPG" },
                            { "type": "gif", "label": "GIF" },
                            { "type": "pdf", "label": "PDF" }
                        ]
                    }, {
                        "label": "Datos",
                        "menu": [
                            { "type": "csv", "label": "CSV" },
                            { "type": "xlsx", "label": "XLSX" }
                        ]
                    }, {
                        "label": "Imprimir", "type": "print"
                    }
                ]
            }];
            chart.exporting.filePrefix = Nombre;
        }


        function llenarChart21(response) {
            var map = am4core.create("chart21", am4maps.MapChart);
            map.geodataSource.url = "../coronavirus/Mexico_Estados.json";
            map.projection = new am4maps.projections.Miller();
            var listaDrogas = $.parseJSON(response.d);
            var pobtotal = 0;
            var casostotal = 0;
            var title = Array(map.titles.create(), map.titles.create(), map.titles.create());
            var cad = "";
            var colores = ["#E6EE3A", "#CED52B", "#009900", "#FF2D00", "#FF2D00","#D2CDCC"];
            var coloresRango = ["#9AC443", "#61AA28", "#F8AA28", "#F15A24", "#910E07", "#9a3507"];
            var color = "";

            var gradient = new am4core.LinearGradient();
            gradient.addColor(am4core.color("red"));
            gradient.addColor(am4core.color("blue"));

            var confirmados = 0;
            var probables = 0;
            var descartados = 0;
            var defunciones = 0;
            var polygonSeries = map.series.push(new am4maps.MapPolygonSeries());
            var cincuenta= 0, cien= 0, doscincuenta= 0, mil= 0;
            polygonSeries.useGeodata = true;
            polygonSeries.exclude = [""];
            cad='polygonSeries.data=[{';
            for (i = 0; i < listaDrogas.length; i++) {
                pobtotal += parseFloat(listaDrogas[i][4]);
                casostotal += parseFloat(listaDrogas[i][2]);
                if (listaDrogas[i][4] > 0) {
                    if (listaDrogas[i][4] <= 50){
                        color = coloresRango[0];
                    } else if (listaDrogas[i][4] <= 100) {
                        color = coloresRango[1];
                    } else if (listaDrogas[i][4] <= 250) {
                        color = coloresRango[2];
                    } else if (listaDrogas[i][4] <= 500) {
                        color = coloresRango[3];
                    } else if (listaDrogas[i][4] <= 1000) {
                        color = coloresRango[4];
                    } else {
                        color = coloresRango[5];
                    }
                } else if(listaDrogas[i][6] > 0) {
                    color = colores[1];  
                }
                else if(listaDrogas[i][5] > 0) {
                    color = colores[2];
                }
            
                cad += ' "id": "' + listaDrogas[i][3] + '", "value": ' + (listaDrogas[i][4]) + ', "descartados": ' + (listaDrogas[i][5]) + ', "estudio": ' + (listaDrogas[i][6]) + ', "defuncion": ' + (listaDrogas[i][7]) + ',"fill": am4core.color("' + color + '") },{';
            
                descartados = descartados + parseInt(listaDrogas[i][5],10);
                probables   = probables   + parseInt(listaDrogas[i][6],10);
                confirmados = confirmados + parseInt(listaDrogas[i][4],10);
                defunciones = defunciones + parseInt(listaDrogas[i][7],10);

                if (parseInt(listaDrogas[i][3]) != listaDrogas.length)
                {
                  cad += ' "id": "' + listaDrogas[i][3] + '", "value": ' + (listaDrogas[i][4]) + ', "descartados": ' + (listaDrogas[i][5]) + ', "estudio": ' + (listaDrogas[i][6]) + ', "defuncion": ' + (listaDrogas[i][7]) + ',"fill": am4core.color("' + color + '") },{';
                } else {
                  cad += ' "id": "' + listaDrogas[i][3] + '", "value": ' + (listaDrogas[i][4]) + ', "descartados": ' + (listaDrogas[i][5]) + ', "estudio": ' + (listaDrogas[i][6]) + ', "defuncion": ' + (listaDrogas[i][7]) + ',"fill": am4core.color("' + gradient + '") }]';
                }

                /*if(listaDrogas[i][7] > 0){
                    
                }*/
            }
            crearlabel(map, "69%","5%",  " Número de Casos Positivos","#FFFFFF");
           // crearlabel(map, "70%","10%",   "0","#FFFFFF",20);
           // crearlabel(map, "67%","10%",  "[#000000]___","#000000",20);
            crearlabel(map, "72%","10%",   "1 a ","#FFFFFF",20);
            crearlabel(map, "77%","10%",  "50","#FFFFFF",20);
            crearlabel(map, "80%","10%",  "(23 Estados)","#FFFFFF",20);
            crearlabel(map, "67%","10%",  "[#9AC443]___",coloresRango[0],20);
            crearlabel(map, "71%","15%", "51 a  ","#FFFFFF",20);
            crearlabel(map, "76%","15%",  "100","#FFFFFF",20);
            crearlabel(map, "81%","15%",  "(7 Estados)","#FFFFFF",20);
            crearlabel(map, "67%","15%", " [#61AA28]___",coloresRango[1],20);
            crearlabel(map, "70%","20%", "101 a ","#FFFFFF",20);
            crearlabel(map, "76%","20%",  "250","#FFFFFF",20);
            crearlabel(map, "81%","20%",  "(1 Estado)","#FFFFFF",20);
            crearlabel(map, "67%","20%", " [#F8AA28]___",coloresRango[2],20);
            crearlabel(map, "70%","25%",  "251 a ","#FFFFFF",20);
            crearlabel(map, "76%","25%",  "500","#FFFFFF",20);
			crearlabel(map, "81%","25%",  "(1 Estado)","#FFFFFF",20);
            crearlabel(map, "67%","25%", " [#F15A24]___",coloresRango[3],20);
            crearlabel(map, "70%","30%",  "501 a 1000","#FFFFFF",20);
            crearlabel(map, "67%","30%", " [#910E07]___",coloresRango[4],20);
           // crearlabel(map, "10%","70%", "Total casos positivos: " + confirmados,'#FFFFFF',20);
             crearlabel(map, "10%","70%", "Total casos positivos: " + "1,378",'#FFFFFF',20);
           // crearlabel(map, "70%","35%", " Positivos: " + "201 a 500",coloresRango[5],20);
           /* crearlabel(map, "70%","35%", " Negativos: " + descartados,'#FFFFFF',20);  
            crearlabel(map, "70%","40%", " Sospechosos: "  + probables,'#FFFFFF',20);
            crearlabel(map, "70%","45%", "Defunciones: " + defunciones,'#FFFFFF',20); 
             */

			//crearlabel(map, "70%","30%", "Casos confirmados Total: " + confirmados,colores[4],20); 		   
              //map.titles.create().text = "Estados Reportando Casos de COVID-19";
              //  var label = map.chartContainer.createChild(am4core.Label);
              //  label.text = "Cierre con corte a las 13:00 hrs, 25 de Marzo de 2020";
             //   label.align = "center";
           var label = map.createChild(am4core.Label);
            label.text = "Cierre con corte a las 13:00 hrs, 1 de Abril de 2020";
            label.fontSize = 13;
            label.align = "center";
            label.isMeasured = false;
            label.x = am4core.percent(20);
            label.horizontalCenter = "middle";
            label.y = am4core.percent(92);
            var label1 = map.createChild(am4core.Label);
            label1.text = "Fuente: Plataforma COVID-19, SINAVE, DGE, SSa.";
            label1.fontSize = 13;
            label1.align = "left";
            label1.isMeasured = false;
            label1.x = am4core.percent(6.5);
            label1.horizontalCenter = "left";
            label1.y = am4core.percent(95);
            var label2 = map.createChild(am4core.Label);
            label2.text = "Estados de México reportando casos de COVID-19";
            label2.fontSize = 25;
            label2.align = "center";
            label2.isMeasured = false;
            label2.x = am4core.percent(50);
            label2.horizontalCenter = "middle";
            label2.y = am4core.percent(0);

            // crearlabel(map, "35%","90%", "Cierre con corte a las 13:00 hrs, 25 de Marzo de 2020","#FFFFFF",13); 
            // crearlabel(map, "35%","95%", "Fuente: Plataforma ncov19, SINAVE, DGE, SS.","#FFFFFF",13); 
            eval(cad);

            polygonSeries.fill = gradient;

            var polygonTemplate = polygonSeries.mapPolygons.template;
            polygonTemplate.tooltipHTML  = "<table><tr>  <td colspan=\"2\" style=\"text-align:center\"><strong>{ESTADO}</strong></td></tr><tr>  <td style=\"text-align:left\">Casos Positivos</th>  <td style=\"text-align:right\">{value}</td></tr><tr>  <td style=\"text-align:left\">Casos Negativos</th>  <td style=\"text-align:right\">{descartados}</td></tr><tr>  <td style=\"text-align:left\">Casos Sospechosos</th>  <td style=\"text-align:right\">{estudio}</td></tr><tr>  <td style=\"text-align:left\">Defunciones: </th>  <td style=\"text-align:right\">{defuncion}</td></tr></table>"
            polygonTemplate.propertyFields.fill ="fill";

            // Create hover state and set alternative fill color
            var hs = polygonTemplate.states.create("hover");
            hs.properties.fill = am4core.color("#99ccff");
            
            for (i = 0; i < title.length; i++) {
                title[i].fontSize = 20;
                title[i].marginBottom = 5;
                title[i].response = true;
            }

            // var estadoss = document.getElementById('txtEstado').value
            // if (estadoss = 99) {

            // Creamos un menu para exportar el chart
            CreaExport(map, "COV19_MAPA");

            // Cuando carguen los datos, quitamos la imagen de carga
            map.events.on('ready', () => {
                QuitaCarga("carga21");
            });
        }
    </script>

      <script type="text/javascript">      
          function GetIEVersion() {
              var sAgent = window.navigator.userAgent;
              var Idx = sAgent.indexOf("MSIE");

              // If IE, return version number.
              if (Idx > 0) 
                  return parseInt(sAgent.substring(Idx+ 5, sAgent.indexOf(".", Idx)));

                  // If IE 11 then look for Updated user agent string.
              else if (!!navigator.userAgent.match(/Trident\/7\./)) 
                  return 11;

              else
                  return 0; //It is not IE
          }

          if (GetIEVersion() > 0) {
              alert("La plataforma no soporta el uso de Internet Explorer, por favor descarga otro explorador de la siguiente pagina, recomendamos el uso de Google Chrome.");
              window.location.replace("http://sisveflu.sinave.gob.mx/instaladores.aspx");
          }
          else {
          }
             
           </script>
    <style type="text/css">


a 
{
	color: #FF8A00;
}


a.menu_principal{font-family:Verdana;font-size:10px;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;color:#666666;text-decoration:none;}
.menu_principal{padding:0;margin:0;border-width:0;background-color:#E5E7E6;}
.footer{font-family:Verdana;font-size:9px;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;color:#98999B;text-decoration:none;}
a.footer{font-family:Verdana;font-size:9px;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;color:#98999B;text-decoration:none;}
        .style2
        {
            color: #999999;
        }
        .style3
        {
            color: #999999;
            text-align: right;
        }
         #form1
        {
            width: 100%;
        }
    </style>
</head>
<body>
    <form method="post" action="mapa.aspx" id="aspnetForm">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTY1NDU2MTA1MmRkYlh6TOKvEalh0E5YjQqOxRKU/gTNbCu67d/CooDL2zs=" />
</div>

<div class="aspNetHidden">

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="1DE71E0D" />
</div>
      
        <table style="width: 100%; text-align: center">
            <tr style="text-align: center">
                <td style="width: 100%; text-align: center;" >
                    <img id="ctl00_Image1" src="Images/headsinfondo.png" style="height:110px;width:1080px;" />
                </td>
            </tr>
           <tr style="height: 15px">
                 <td style="text-align: center">
                    <div style="text-align: center; vertical-align: middle; font-size: xx-small; background-color: #9A324F; height: 20px; width: 100%; margin-top: 5px; margin-bottom: 5px;"></div>
                </td>
            </tr>

        </table>
        <table style="width: 100%;text-align: center">
            <tr   style="text-align: center">
                <td style="width: 100%; text-align: center;" >

                    
      <table style="margin: 0 auto;" class="auto-style40" >
        <tr>
            <td style="width: 50%; position: center; height: 80%">
                <div id="tab21">
                    <table style="width: 100%"  border="1">
                        <tr>
                            <td style="width: 100%;">
                                <div class="chartcontainer" style="text-align: center;">
                                    <div id="chart21" class="chartStyle"></div>
                                    <div id="carga21" class="cargando">
                                        <div class="figura">
                                            <div class="cssload-inner cssload-one"></div>
                                            <div class="cssload-inner cssload-two"></div>
                                            <div class="cssload-inner cssload-three"></div>
                                        </div>
                                        <div class="DIVfountainTextG">
                                            <div class="fountainTextG fountainTextG_1 ">C</div>
                                            <div class="fountainTextG fountainTextG_2 ">A</div>
                                            <div class="fountainTextG fountainTextG_3 ">R</div>
                                            <div class="fountainTextG fountainTextG_4 ">G</div>
                                            <div class="fountainTextG fountainTextG_5 ">A</div>
                                            <div class="fountainTextG fountainTextG_6 ">N</div>
                                            <div class="fountainTextG fountainTextG_7 ">D</div>
                                            <div class="fountainTextG fountainTextG_8 ">O</div>
                                            <div class="fountainTextG fountainTextG_9 ">&nbsp;</div>
                                            <div class="fountainTextG fountainTextG_10">D</div>
                                            <div class="fountainTextG fountainTextG_11">A</div>
                                            <div class="fountainTextG fountainTextG_12">T</div>
                                            <div class="fountainTextG fountainTextG_13">O</div>
                                            <div class="fountainTextG fountainTextG_14">S</div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
    </table>
    <div id="sfcgr4mcurzr8n9p5g29q8yt44hre7pk2wh" style="display:none"></div>
<script type="text/javascript" src="https://counter7.stat.ovh/private/counter.js?c=gr4mcurzr8n9p5g29q8yt44hre7pk2wh&down=async" async></script>
<br><a href="https://www.contadorvisitasgratis.com"></a><noscript>
<a href="https://www.contadorvisitasgratis.com" title="">
<img src="https://counter7.stat.ovh/private/contadorvisitasgratis.php?c=gr4mcurzr8n9p5g29q8yt44hre7pk2wh" border="0" title="" alt=""></a></noscript>

                </td>
            </tr>
            <tr style="height: 15px">
                 <td style="text-align: center">
                    <div style="text-align: center; vertical-align: middle; font-size: xx-small; background-color: #9A324F; height: 20px; width: 100%; margin-top: 5px; margin-bottom: 5px;"></div>
                </td>
            </tr>
        </table>
    </form>
</body>
</html>
